
# ソロRPGコンパニオン 使用マニュアル

## はじめに

「ソロRPGコンパニオン」は、一人でロールプレイングゲームを遊ぶ際に、セッションの記録や管理をサポートするためのWebアプリケーションです。プレイログ、キャラクターシート、ランダムテーブル、リソーストラッカー、ダイスローラーといった、ソロRPGセッションを円滑に進めるための機能を提供します。

また、「ゲームデータパッケージ」という形式のファイルを読み込むことで、特定のゲームシステムに合わせたキャラクターシートの項目や、あらかじめ定義されたランダムテーブル、ルールブックなどのデータを簡単に設定することも可能です。

このマニュアルでは、ソロRPGコンパニオンの基本的な使い方と各機能について説明します。

## 基本的な操作

Webブラウザで ソロRPGコンパニオン を開くと、すぐに使い始めることができます。データはブラウザの機能を使って自動的に保存されます（ローカルストレージ）。ただし、ブラウザのキャッシュクリアなどによってデータが消える可能性があるため、重要なデータはJSONファイルとしてエクスポートしてバックアップを取ることを強く推奨します。

### データの保存 (JSONファイル)

セッションの状態（キャラクターシート、プレイログ、テーブル、トラッカー、ダイス履歴など）をJSONファイルとしてエクスポートできます。

1.  画面上部にある **「保存」** ボタンをクリックします。
2.  JSONファイル（例: `solo_rpg_session_*.json`）がダウンロードされます。

### データの読み込み (JSONファイル)

以前にエクスポートしたJSONファイルからセッションの状態を読み込むことができます。

1.  画面上部にある **「読込」** ボタンをクリックします。
2.  ファイル選択ダイアログが表示されるので、読み込みたいJSONファイルを選択します。
3.  データが読み込まれ、画面に反映されます。

**注意:** 読み込んだデータで現在のセッションの状態は上書きされます。誤って現在のデータを失わないように、必要な場合は事前に「保存」を行ってください。

### ゲームデータパッケージの読み込み (.srgdファイル)

ゲームデータパッケージファイル（`.srgd` または対応するjsonファイル）を読み込むことで、特定のゲームシステム向けのテンプレートやデータを一括で設定できます。

1.  画面上部にある **「データ読込」** ボタンをクリックします。
2.  ファイル選択ダイアログが表示されるので、読み込みたい`.srgd`ファイルを選択します。
3.  データが読み込まれ、アプリケーションの関連する機能に反映されます。

**読み込まれる主な内容:**
*   キャラクターシートの「能力値・詳細」ラベルとカスタム項目のテンプレート
*   リソーストラッカーのテンプレート（最初からいくつか登録されます）
*   ランダムテーブルのデータ
*   ルールブックのデータ（専用パネルが表示されます）

**注意:** ゲームデータパッケージの読み込みは、現在のセッションのキャラクターシート項目、リソーストラッカー、ランダムテーブルの既存データを上書きまたは追加する可能性があります。プレイログやダイス履歴は上書きされません。

### データの初期化 (リセット)

セッションの全てのデータを初期状態に戻します。

1.  画面上部にある **「リセット」** ボタンをクリックします。
2.  確認ダイアログが表示されます。
3.  「OK」を選択すると、キャラクターシート、プレイログ、テーブル、トラッカー、ダイス履歴など、全てのデータが消去され、初期状態に戻ります。

**注意:** この操作は元に戻せません。データを残したい場合は、事前に「保存」を行ってください。

### テーマの変更

アプリケーションの見た目（カラーテーマ）を変更できます。

1.  画面上部にある **「テーマ」** ボタンをクリックします。
2.  ドロップダウンメニューが表示され、利用可能なテーマが表示されます。
3.  リストから好きなテーマを選択すると、すぐに見た目が変更されます。

現在利用可能なテーマ: ダーク、ライト、アース、パステル。

## 主要機能の詳細

ソロRPGコンパニオンの各パネルと機能について説明します。

### 1. プレイログ

ゲームセッションの出来事やアイデア、ダイスロールの結果などを時系列で記録するメインのエリアです。

*   **タイトル**: プレイログ全体のタイトルです。クリックすると編集できます。
*   **「元に戻す」「やり直す」ボタン (矢印アイコン)**: プレイログの編集や追加、削除、リソーストラッカーの反映など、履歴管理されている操作を一つ前に戻したり、やり直したりできます。
*   **ログエントリーリスト**: 過去のプレイログのエントリーが新しい順に表示されます。
    *   各エントリーにマウスカーソルを合わせると、右上に編集・削除ボタンが表示されます。
    *   **編集ボタン (ペンアイコン)**: そのエントリーを編集モードにします。内容、タイプ（見出し/通常）、色を変更できます。編集後は「保存」ボタンで確定するか、「キャンセル」ボタンで取り消します。
    *   **削除ボタン (ゴミ箱アイコン)**: そのエントリーを削除します。
*   **入力欄**: 新しいログエントリーを入力するためのテキストエリアです。
    *   入力中に `Shift + Enter` を押すと、改行せずに投稿されます。`Enter` キーのみを押すと改行できます。
*   **「見出し」ボタン**: 入力内容を見出しとして追加するかどうかの切り替えボタンです。クリックするごとに見出し⇔通常のテキストが切り替わります。
*   **「色」ボタン (パレットアイコン)**: 通常のログエントリーの色を選択するためのボタンです。見出しの場合は無効になります。
    *   クリックするとカラーパレットが表示されます。
    *   パレットから色を選択すると、入力中のテキストの色が変わります。選択後に再度ボタンをクリックするか、他の場所をクリックするとパレットが閉じます。
*   **「追加」ボタン**: 入力欄の内容を新しいログエントリーとして追加します。Shift+Enterと同じ操作です。
*   **「HTML」ボタン**: プレイログ（および簡易キャラクターシート）をHTMLファイルとしてダウンロードします。テキスト形式で共有や閲覧に適しています。

### 2. キャラクターシート

ゲームのキャラクター情報を管理するためのパネルです。

*   **名前**: キャラクターの名前を入力・編集できます。テキストボックスをクリックして入力し、他の場所をクリックするかTabキーでフォーカスを外すと保存されます。
*   **能力値・詳細**: ゲームの能力値、特技、背景など、キャラクターに関する詳細な情報を入力・編集できます。テキストエリアをクリックして入力し、他の場所をクリックするかTabキーでフォーカスを外すと保存されます。ゲームデータパッケージを読み込むと、この項目のラベル（例：「能力値・詳細」）が変わることがあります。
*   **画像**: キャラクターの画像を設定できます。
    *   画像が表示されている枠をクリックするか、「画像変更」ボタンをクリックします。
    *   ファイル選択ダイアログが表示されるので、画像ファイル（JPG, PNGなど）を選択します。
    *   選択した画像が表示枠に表示されます。
*   **カスタム項目**: 能力値・詳細とは別に、自由な項目名と内容で情報を追加できます。ゲームデータパッケージによっては、最初からいくつかの項目が登録されている場合があります。
    *   **項目追加ボタン**: 新しいカスタム項目を追加します。項目名と内容を編集できます。
    *   **項目名の入力欄**: 項目の名前を入力・編集します。クリックして入力し、フォーカスを外すと保存されます。
    *   **内容の入力欄**: 項目の内容を入力・編集します。クリックして入力し、フォーカスを外すと保存されます。
    *   **削除ボタン (ゴミ箱アイコン)**: その項目を削除します。

### 3. ダイスローラー

様々な形式のダイスロールを実行できる機能です。

*   **ダイスコマンド入力欄**: 振りたいダイスのコマンドを入力します。
    *   例: `1d6` (6面ダイスを1個), `2d6+3` (6面ダイスを2個振り、結果に3を加算), `d20` (20面ダイスを1個), `3dF` (Fate/Fudgeダイスを3個)
    *   数の部分は省略可能（例: `d6` は `1d6` と同じ）
    *   対応する面数は2から1000まで、ダイス数は1から100まで、修正値は0から1000までです。
*   **「振る」ボタン**: 入力されたダイスコマンドでダイスを振り、結果を表示します。
*   **エラーメッセージ**: コマンド形式が無効な場合や、数値が範囲外の場合にエラーが表示されます。
*   **ロール履歴**: 過去のダイスロールの結果が表示されます。
    *   「ロール履歴 (...)」というボタンをクリックすると、履歴リストの表示/非表示を切り替えられます。
    *   リストには、コマンド、合計値、個別に出た目、ロールした時刻が表示されます。

### 4. ランダムテーブル

ランダムな結果を得るためのテーブルを作成・管理・使用できる機能です。

*   **「CSVインポート」ボタン**: CSVファイルからテーブルデータをインポートします。
    *   CSVファイルは、1行に1項目を記述します。
    *   先頭行に `#DICE:` と記述し、その後にダイスコマンド（例: `#DICE: 2d6`）を指定すると、そのテーブルを振る際に指定したダイスを振り、出目に対応する項目を選択するテーブルとして扱えます。
    *   ダイスコマンドを指定した場合、各行の先頭に「出目」または「出目の範囲」（例: `1`, `2-5`, `6+`）をカンマ区切りで記述し、その後に項目内容を記述します（例: `1,何も起こらない`, `2-5,面白いこと`, `6+,素晴らしい出来事`）。
    *   ダイスコマンドを指定しない場合、各行はそのまま項目内容として扱われ、テーブルを振るとランダムに1項目が選択されます。
*   **「＋」ボタン**: 新しいランダムテーブルを追加します。テーブル名を入力して作成します。
*   **テーブル選択ドロップダウン**: 作成・インポートしたテーブルの中から、現在使用するテーブルを選択します。
*   **テーブル情報の表示/編集**: 選択中のテーブルの名前とダイスコマンドが表示されます。
    *   名前やダイスコマンドをクリックすると編集できます。編集が終わったら、他の場所をクリックするかEnterキーで確定します。テーブル名は空にできません。ダイスコマンドは空にすることも可能です。
    *   **削除ボタン (ゴミ箱アイコン)**: 選択中のテーブルを削除します。
*   **項目リスト**: 選択中のテーブルの項目が表示されます。
    *   **項目内容**: 各項目の内容が表示されます。ダイスコマンドが設定されているテーブルでは、左に出目/範囲が表示されます。
    *   **編集ボタン (ペンアイコン)**: その項目を編集できます。ダイスコマンドが設定されているテーブルでは、出目/範囲と内容の両方を編集できます。
    *   **削除ボタン (ゴミ箱アイコン)**: その項目を削除します。
    *   **「項目追加」ボタン**: 選択中のテーブルに新しい項目を追加します。ダイスコマンドが設定されているテーブルかそうでないかで、入力項目が変わります。
*   **「〇〇を振る」ボタン**: 選択中のテーブルを振ります。ダイスコマンドが設定されている場合はダイスロールを行い、結果に対応する項目を選択します。設定されていない場合は項目の中からランダムに1つ選択します。
*   **結果表示**: テーブルを振った結果が表示されます。ダイスコマンドを使った場合は、ダイスロールの結果も表示されます。

### 5. リソーストラッカー

HP、MP、所持金など、増減するリソースを管理するための機能です。

*   **トラッカーリスト**: 現在登録されているリソーストラッカーが一覧表示されます。
*   **各トラッカー**: 各トラッカーは以下の要素を持ちます。
    *   **リソース名入力欄**: トラッカーの名前を入力・編集します。クリックして入力し、フォーカスを外すと保存されます。
    *   **値表示/編集欄**: 現在の値が表示されます。直接クリックして数値を入力・編集することも可能です。
    *   **「ー」ボタン**: 現在の値から1を引きます。
    *   **「＋」ボタン**: 現在の値に1を加えます。
    *   **変更理由入力欄**: 値の変更に関する理由を任意で入力できます。
    *   **「反映」ボタン**: 値の編集や変更理由の入力を確定し、現在の値に反映します。値が実際に変更された場合や、変更理由が入力された場合にのみ、プレイログに自動的に記録されます。
    *   **「履歴」ボタン**: そのトラッカーの過去の変更履歴が表示されます。クリックで表示/非表示を切り替えられます。
    *   **削除ボタン (ゴミ箱アイコン)**: そのトラッカーを削除します。削除時、プレイログに記録が残ります。
*   **「新規トラッカー追加」エリア**: 新しいトラッカーを作成できます。
    *   **リソース名入力欄**: 追加したいトラッカーの名前を入力します。
    *   **初期値入力欄**: 追加したいトラッカーの最初の値を入力します。
    *   **「追加」ボタン**: 入力した名前と初期値で新しいトラッカーを作成します。

### 6. ルールブック

ゲームデータパッケージに含まれるルールブックの情報を閲覧できます。

*   **表示条件**: このパネルは、読み込んだゲームデータパッケージにルールブックのデータが含まれている場合にのみ表示されます。
*   **検索欄**: ルールブックのタイトルや内容をキーワードで検索できます。
*   **セクション選択ドロップダウン**: ルールブックの各セクションのタイトルが一覧表示され、選択できます。検索結果がある場合は、検索に一致したセクションのみが表示されます。
*   **内容表示エリア**: 選択したセクションのタイトルと内容が表示されます。

## ゲームデータパッケージ (.srgd) について

ソロRPGコンパニオンは、独自の`.srgd`（Solo RPG Game Data）ファイル形式をサポートしています。これはJSON形式のファイルで、ゲームシステムに関するデータを一括で定義できます。

### ゲームデータパッケージに含まれるデータ

ゲームデータパッケージには、通常以下の情報が含まれます。

*   **マニフェスト**: ゲームのタイトル、作者、バージョン、説明などの基本情報。
*   **キャラクターシートテンプレート**: キャラクターシートの「能力値・詳細」のラベルや、カスタム項目の初期テンプレート定義。
*   **ルールブックセクション**: ゲームのルールや背景などのテキスト情報。ソロRPGコンパニオンでは「ルールブック」パネルとして表示されます。
*   **ランダムテーブル**: ゲームで使用するランダムテーブルのデータ。Diceコマンドや項目のリストが含まれます。
*   **リソーストラッカーテンプレート**: ゲームで使用するリソースの初期テンプレート定義（例: HP, MPなど）。

### ゲームデータパッケージの読み込み

上記「基本的な操作」で説明した通り、「データ読込」ボタンから`.srgd`ファイルを読み込むことで、これらのデータがソロRPGコンパニオンに反映され、より特定のゲームシステムに特化した形でツールを利用できるようになります。

## トラブルシューティング・よくある質問

*   **データが消えてしまった！**: ソロRPGコンパニオンはブラウザのローカルストレージに自動保存しますが、ブラウザのキャッシュクリアやストレージ上限などでデータが失われる可能性はゼロではありません。重要なセッションは、定期的に「保存」ボタンからJSONファイルをダウンロードしてバックアップを取ることを強く推奨します。
*   **JSONファイルが読み込めない**: ファイルが破損しているか、ソロRPGコンパニオンのデータ形式と互換性のないファイルかもしれません。ファイルが正しい形式（ソロRPGコンパニオンが「保存」で出力したJSON、またはそれに準ずる構造）であるか確認してください。
*   **CSVインポートがうまくいかない**: CSVファイルの形式が正しいか確認してください。特に、カンマ区切りが正しく使われているか、改行コードの種類、#DICEヘッダーの記述などが原因となることがあります。
*   **UIの表示がおかしくなった / 動作がおかしい**: 何らかの一時的な不具合かもしれません。ブラウザをリロード（再読み込み）してみてください。それでも改善しない場合は、「リセット」を試すことで初期状態に戻すことができます（データは消去されるため注意が必要です）。
*   **特定のゲームデータパッケージに関する質問**: パッケージの内容や使い方に関する質問は、そのパッケージの配布元にお問い合わせください。ソロRPGコンパニオン自体はパッケージのデータ構造に従って表示・機能を提供しますが、パッケージの内容に関するサポートは提供できません。

## 謝辞

ソロRPGコンパニオンは以下の技術を利用しています。

*   React (UIライブラリ)
*   Tailwind CSS (スタイル)
*   jspdf (PDF生成補助 - **※現バージョンではPDF出力機能は搭載されていませんが、関連ライブラリは含まれています** )
*   html2canvas (HTML要素の画像化 - **※現バージョンではPDF出力機能は搭載されていませんが、関連ライブラリは含まれています** )

素晴らしいライブラリの開発者の皆様に感謝いたします。

# ランダムテーブル用CSVファイルの作成ガイド
このツールでは、ランダムテーブルをCSV (カンマ区切り値) ファイルからインポートできます。CSVファイルは、テキストエディタ（メモ帳、VS Code、Sublime Textなど）や表計算ソフト（Excel、Google スプレッドシート、LibreOffice Calcなど）で作成・編集できます。

## 基本構造
CSVファイルは基本的に以下の2つの形式に対応しています。
ダイスロール結果に基づくテーブル: 特定のダイスを振り、その出目に応じて結果が決まるテーブル。
単純なリスト形式のテーブル: 項目リストの中からランダムに1つを選ぶテーブル。

## 1. ダイスロール結果に基づくテーブルの作成方法
この形式では、テーブルを振る際に使用するダイスコマンドを指定し、各項目にダイスの出目（または範囲）を割り当てます。

ファイル構造:

1行目 (任意): ダイスコマンド指定
ファイルの最初の行が #DICE: で始まる場合、その行はテーブル全体のダイスコマンドとして解釈されます。
例: #DICE: 2d6 (2つの6面ダイスを振る)
例: #DICE: 1d100+10 (1つの100面ダイスを振り、結果に10を加える)
例: #DICE: 3dF (3つのフェイトダイスを振る)
この行がない場合、下記の「単純なリスト形式のテーブル」として扱われます。

2行目以降: テーブルの項目
各行は 出目/範囲,内容 の形式で記述します。
出目/範囲: ダイスロールの結果、この項目が選ばれる条件を指定します。
特定の数値: 7 (ダイスロール結果が7の場合)
範囲: 2-5 (ダイスロール結果が2から5の間の場合)
以上: 10+ (ダイスロール結果が10以上の場合)
以下: 3- (ダイスロール結果が3以下の場合)
重要: 出目/範囲が重複する場合、該当する項目の中からランダムで1つが選ばれます。
, (カンマ): 出目/範囲と内容を区切る記号です。
内容: ダイスロールの結果、表示されるテキストです。内容にカンマを含めたい場合は、内容全体をダブルクォーテーション(")で囲んでください。(例: "アイテムA, B, またはC")

例 (2d6を使用する遭遇表):
#DICE: 2d6
2-3,ゴブリンの斥候が現れる。
4-5,商人の一行とすれ違う。
6-8,特に何もなし。静かだ。
9-10,古い遺跡の入り口を発見する。
11-12,強力なグリフォンが上空を旋回している！ 

**注意点:**
CSVファイルはUTF-8エンコーディングで保存することを推奨します。
#DICE: 行は必ずファイルの先頭に記述してください。
空行は無視されます。
出目/範囲が指定されていない行（例: ,何かが起こる）や、カンマの後に内容がない行（例: 7,）は、正しく解釈されない可能性があります。

## 2. 単純なリスト形式のテーブルの作成方法
この形式では、ダイスコマンドを指定せず、リストアップされた項目の中からランダムに1つが選ばれます。

ファイル構造:
各行が1つの項目となります。
例 (ランダムな噂のテーブル):
王様は密かにドラゴンを飼っているらしい。
隣町のパン屋のパンは食べると眠くなるそうだ。
森の奥深くには喋るキノコがいるという。
最近、夜空に奇妙な光が見えると評判だ。

**注意点:**
ファイルの1行目を #DICE: で始めないでください。
各行の内容がそのままランダムに選択される候補となります。
空行は無視されます。

## ファイル名について
インポートする際、CSVファイルのファイル名（拡張子 .csv を除く部分）が、デフォルトのテーブル名として使用されます。もちろん、インポート後にツール内でテーブル名を変更することも可能です。

## 表計算ソフトで作成する場合
ExcelやGoogleスプレッドシートなどの表計算ソフトを使用する場合：
ダイスロール結果に基づくテーブル:
1行目のA列に #DICE: (ダイスコマンド) と入力します。
2行目以降、A列に出目/範囲を、B列に対応する内容を入力します。
単純なリスト形式のテーブル:
1行目からA列に各項目を入力します。
ファイルを保存する際に、ファイルの種類として「CSV (カンマ区切り) (*.csv)」またはそれに類する形式を選択してください。

# 利用規約

ソロRPGコンパニオン 利用規約

「ソロRPGコンパニオン」（以下「本アプリケーション」）をご利用いただきありがとうございます。本アプリケーションは、ソロRPGセッションの補助を目的としたツールです。本アプリケーションをご利用になる前に、以下の利用規約（以下「本規約」）をよくお読みください。本アプリケーションを利用された場合、本規約に同意したものとみなします。

第1条（本規約への同意）
利用者は、本規約に同意した場合に限り、本アプリケーションを利用することができます。
本アプリケーションを利用された場合、利用者は本規約に有効かつ取消不能な同意をしたものとみなされます。

第2条（自己責任での利用）
本アプリケーションは、利用者の責任において利用されるものとします。
本アプリケーションを利用することにより生じたいかなる損害（データの損失、誤動作、その他の不利益を含むがこれらに限られない）についても、開発者は一切の責任を負いません。
利用者は、本アプリケーションの利用、および本アプリケーションに保存したデータに関する一切の責任を負うものとします。重要なデータについては、利用者自身で定期的にバックアップを作成することを強く推奨します。

第3条（本アプリケーションの提供とサポート）
本アプリケーションは、開発者が提供可能な範囲で提供されます。
開発者は、本アプリケーションの完全性、正確性、信頼性、特定の目的への適合性、セキュリティ等に関していかなる保証も行いません。
開発者は、本アプリケーションに関する技術的なサポート、操作方法に関する質問、個別の不具合報告など、利用者からの問い合わせに対応する義務を負いません。サポートの提供は予定しておりません。

第4条（著作権および改変・再配布の制限）
本アプリケーションに関する著作権、およびその他の知的財産権は、開発者または正当な権利を有する第三者に帰属します。
利用者は、個人的な利用を目的とする場合に限り、本アプリケーションのコードを改変して使用することができます。
改変したかどうかにかかわらず、本アプリケーションの全部または一部を、開発者の事前の書面による許可なく、第三者に再配布、公開、販売、譲渡、またはその他の方法で利用させることを禁止します。

第5条（AI技術の利用）
本アプリケーションの開発にはAI技術が利用されています。
AI技術の使用に強い懸念や反対をお持ちの方は、本アプリケーションを利用することができません。

第6条（本規約の変更）
開発者は、必要と判断した場合、利用者への事前の通知なく本規約を変更できるものとします。本規約の変更後、利用者が本アプリケーションの利用を継続した場合、利用者は変更後の本規約に同意したものとみなされます。
